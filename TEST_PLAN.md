# 应用全面测试计划

## 测试日期
2025-11-01

## 测试版本
最新构建版本（包含所有修复）

## 测试环境
- HarmonyOS 模拟器
- 设备：本地模拟器 (127.0.0.1:5555)

---

## 一、数据管理与同步测试 🔴 高优先级

### 1.1 身高记录功能测试
**测试目的**：验证身高记录的新增/编辑功能已恢复，数据同步正常

#### 测试用例 1.1.1：从"我的"页面进入身高记录
**前置条件**：
- 应用已启动
- 已登录或未登录用户

**测试步骤**：
1. 进入"我的"标签页
2. 找到"我的身高"卡片
3. 点击身高卡片

**预期结果**：
- ✅ 跳转到"身体数据"页面
- ✅ 自动打开身高记录对话框（底部弹出）
- ✅ 对话框显示标题"身高记录"

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.1.2：添加身高记录
**前置条件**：
- 已进入身体数据页面
- 身高记录对话框已打开

**测试步骤**：
1. 点击"添加身高记录"按钮
2. 在弹出的对话框中输入身高值（如：175.5）
3. 点击确认

**预期结果**：
- ✅ 身高记录对话框关闭
- ✅ 对话框中出现新的身高记录（显示：175.5厘米 + 日期）
- ✅ 身体数据页面的身高卡片显示更新为 175.5
- ✅ "我的"页面的身高卡片也更新为 175.5（返回查看）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.1.3：编辑身高记录
**前置条件**：
- 已存在至少一条身高记录

**测试步骤**：
1. 打开身高记录对话框
2. 找到一条现有记录
3. 点击该记录的"修改"按钮
4. 在弹出的对话框中修改身高值（如：从 175.5 改为 176.0）
5. 点击确认

**预期结果**：
- ✅ 身高记录对话框关闭
- ✅ 该记录的身高值更新为 176.0
- ✅ 如果这是最新记录，身体数据页面和"我的"页面的身高都更新为 176.0
- ✅ 如果不是最新记录，页面显示不受影响

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.1.4：删除身高记录
**前置条件**：
- 已存在至少两条身高记录

**测试步骤**：
1. 打开身高记录对话框
2. 点击一条记录的"删除"按钮
3. 确认删除

**预期结果**：
- ✅ 该记录从列表中消失
- ✅ 如果删除的是最新记录，身高更新为次新记录的值
- ✅ 如果删除的不是最新记录，页面显示不变

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 1.2 体重记录与同步测试
**测试目的**：验证体重记录后能正确同步到全局状态

#### 测试用例 1.2.1：记录体重 - 同步到全局状态
**前置条件**：
- 已进入"体重趋势"页面

**测试步骤**：
1. 点击"记录体重"按钮（或底部浮动按钮）
2. 输入体重值（如：65.5）
3. 点击确认
4. 返回"我的"页面

**预期结果**：
- ✅ 体重记录成功保存
- ✅ 体重趋势页面显示新的数据点
- ✅ "我的"页面的"我的体重"卡片更新为 65.5 公斤
- ✅ 身体数据页面的体重卡片也显示 65.5
- ✅ BMI 和基础代谢自动重新计算（如果有身高和年龄数据）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.2.2：设置初始体重
**前置条件**：
- 在体重趋势页面的"体重概览"区域

**测试步骤**：
1. 点击"初始"体重的设置按钮
2. 输入初始体重（如：70.0）
3. 点击确认
4. 检查数据同步

**预期结果**：
- ✅ 初始体重保存成功
- ✅ 全局状态中的体重数据同步更新
- ✅ "我的"页面的体重卡片可能更新（如果是第一条记录）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.2.3：设置当前体重
**前置条件**：
- 在体重趋势页面的"体重概览"区域

**测试步骤**：
1. 点击"当前"体重的设置按钮
2. 输入当前体重（如：68.0）
3. 点击确认

**预期结果**：
- ✅ 当前体重保存成功
- ✅ 全局状态同步更新
- ✅ "我的"页面和身体数据页面的体重卡片都更新为 68.0

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 1.3 数据一致性测试
**测试目的**：验证跨页面数据一致性

#### 测试用例 1.3.1：身高数据一致性
**测试步骤**：
1. 在身体数据页面记录身高：180.0
2. 返回"我的"页面，查看身高卡片
3. 进入"身体质量指数"页面，查看身高输入框
4. 进入"基础代谢"页面，查看身高输入框

**预期结果**：
- ✅ 所有页面显示的身高都是 180.0
- ✅ 数据完全一致

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.3.2：体重数据一致性
**测试步骤**：
1. 在体重趋势页面记录体重：70.0
2. 返回"我的"页面，查看体重卡片
3. 进入身体数据页面，查看体重卡片
4. 进入"身体质量指数"页面，查看体重输入框
5. 进入"基础代谢"页面，查看体重输入框

**预期结果**：
- ✅ 所有页面显示的体重都是 70.0
- ✅ 数据完全一致

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.3.3：BMI 计算一致性
**前置条件**：
- 身高 = 175.0 cm
- 体重 = 70.0 kg

**测试步骤**：
1. 在"我的"页面查看 BMI 显示
2. 进入身体数据页面，查看 BMI 显示
3. 进入"身体质量指数"页面，点击"计算"

**预期结果**：
- ✅ 所有页面的 BMI 值一致（约 22.9）
- ✅ BMI 状态一致（应该都是"正常"）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 1.3.4：基础代谢计算一致性
**前置条件**：
- 身高 = 175.0 cm
- 体重 = 70.0 kg
- 年龄 = 25 岁
- 性别 = 男

**测试步骤**：
1. 在"我的"页面查看基础代谢显示
2. 进入身体数据页面，查看基础代谢显示
3. 进入"基础代谢"页面，查看计算结果

**预期结果**：
- ✅ 所有页面的基础代谢值一致（约 1719 千卡）
- ✅ 计算逻辑统一

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 二、页面导航与功能测试

### 2.1 主要页面导航测试

#### 测试用例 2.1.1：底部标签导航
**测试步骤**：
1. 点击各个底部标签（我的、运动、数据、设置）
2. 验证页面切换正常

**预期结果**：
- ✅ 所有标签都能正常切换
- ✅ 页面加载正常，无卡顿

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 2.1.2：身体数据相关页面导航
**测试步骤**：
1. 从"我的"页面点击"我的身高" → 应进入身体数据页面并打开身高记录
2. 从"我的"页面点击"我的体重" → 应进入体重趋势页面
3. 从"我的"页面点击"基础代谢" → 应进入基础代谢页面
4. 从"我的"页面点击"BMI 指数" → 应进入身体质量指数页面
5. 从身体数据页面点击各卡片 → 验证跳转正确

**预期结果**：
- ✅ 所有导航路径正确
- ✅ 身高卡片能自动打开对话框

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 2.2 基础代谢页面测试

#### 测试用例 2.2.1：基础代谢计算流程
**测试步骤**：
1. 进入基础代谢页面
2. 选择性别：男/女
3. 输入年龄：25
4. 输入身高：175
5. 输入体重：70
6. 点击"记录基础代谢"按钮

**预期结果**：
- ✅ 界面显示计算结果（约 1719 千卡，男性）
- ✅ 按钮在底部，可以滚动到达
- ✅ 计算成功后数据保存
- ✅ 返回后数据保持一致

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 2.2.2：基础代谢页面布局
**测试步骤**：
1. 进入基础代谢页面
2. 检查页面布局
3. 滚动到底部

**预期结果**：
- ✅ 基础代谢率卡片上方弧度完整显示，不被遮挡
- ✅ 可以滚动到底部看到"记录基础代谢"按钮
- ✅ "男"/"女"选项间距合适
- ✅ 活动等级说明文字左对齐

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 2.3 体重趋势页面测试

#### 测试用例 2.3.1：体重趋势数据同步
**测试步骤**：
1. 进入体重趋势页面
2. 记录一条新体重：68.0
3. 查看"体重概览"区域
4. 查看图表数据

**预期结果**：
- ✅ "初始"、"当前"、"目标"体重正确显示
- ✅ "记录天数"正确计算（不为 0）
- ✅ 图表显示新数据点
- ✅ 数据刷新及时

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 2.3.2：周月年切换
**测试步骤**：
1. 在体重趋势页面点击"周"按钮
2. 点击"月"按钮
3. 点击"年"按钮

**预期结果**：
- ✅ 按钮点击有 UI 反馈（颜色、字体变化）
- ✅ 按钮居中显示
- ✅ 图表数据正确切换
- ✅ 日期范围正确

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 2.4 运动记录页面测试

#### 测试用例 2.4.1：运动记录页面功能
**测试步骤**：
1. 进入运动记录页面
2. 切换"周月年"视图
3. 切换"运动时长"/"运动次数"/"消耗热量"
4. 检查图表显示

**预期结果**：
- ✅ 默认显示"运动时长"
- ✅ "周月年"切换正常，有 UI 反馈
- ✅ 指标切换正常
- ✅ 图表图例中的小标记已隐藏

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 2.4.2：运动记录页面样式
**测试步骤**：
1. 进入运动记录页面
2. 检查顶部标题栏

**预期结果**：
- ✅ 标题栏背景为灰色（#F5F5F5），不是白色
- ✅ 状态栏区域为灰色（沉浸式设计）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 2.5 热量页面测试

#### 测试用例 2.5.1：热量数据真实性
**测试步骤**：
1. 进入热量页面（ChartPage）
2. 查看热量统计数据
3. 切换周/月/年视图
4. 验证数据来源

**预期结果**：
- ✅ 热量数据来自真实运动记录，不是估算
- ✅ 切换视图时数据正确
- ✅ 统计数据准确（总热量、平均热量、达标天数）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 三、内存泄漏与资源管理测试

### 3.1 页面生命周期测试

#### 测试用例 3.1.1：页面切换资源清理
**测试步骤**：
1. 进入"我的"页面
2. 快速切换多个页面（身体数据、体重趋势、基础代谢等）
3. 多次进入和退出
4. 观察应用性能

**预期结果**：
- ✅ 页面切换流畅，无卡顿
- ✅ 内存使用稳定，无持续增长
- ✅ 无崩溃或异常

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 3.1.2：订阅清理测试
**测试步骤**：
1. 进入订阅了数据变化的页面（如"我的"页面、身体数据页面）
2. 修改数据（如记录体重）
3. 离开页面
4. 再次进入页面
5. 修改数据，观察是否重复更新

**预期结果**：
- ✅ 离开页面后，旧订阅已清理
- ✅ 再次进入不会重复订阅
- ✅ 数据更新正常，无重复回调

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 3.2 定时器清理测试

#### 测试用例 3.2.1：目标设置页面定时器
**测试步骤**：
1. 进入目标设置页面
2. 快速修改多个目标值（步数、体重、运动时间等）
3. 立即退出页面
4. 观察是否有未完成的保存操作

**预期结果**：
- ✅ 页面退出时，所有 setTimeout 已清理
- ✅ 无未完成的异步操作
- ✅ 数据保存正常

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 四、用户体验测试

### 4.1 UI 反馈测试

#### 测试用例 4.1.1：按钮交互反馈
**测试步骤**：
1. 在各个页面点击按钮
2. 检查按钮点击反馈

**预期结果**：
- ✅ "周月年"按钮点击有明显的视觉反馈（颜色变化、字体粗细、透明度）
- ✅ 所有可点击元素都有适当的反馈

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 4.1.2：数据卡片显示
**测试步骤**：
1. 检查各个数据卡片的大小
2. 检查单位显示位置

**预期结果**：
- ✅ 所有卡片大小一致
- ✅ 单位显示在数字后面（同一行），不在下方
- ✅ 无数据时显示 "--"，不显示 "0"

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 4.2 安全区域适配测试

#### 测试用例 4.2.1：状态栏适配
**测试步骤**：
1. 进入"个人信息清单"页面
2. 进入"个人信息共享清单"页面
3. 进入"设置"相关页面（用户协议、隐私政策等）
4. 检查标题位置

**预期结果**：
- ✅ 标题不被状态栏遮挡
- ✅ 有适当的上边距

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 五、异常场景测试

### 5.1 数据边界测试

#### 测试用例 5.1.1：极端身高值
**测试步骤**：
1. 尝试输入身高：50（过小）
2. 尝试输入身高：250（过大）
3. 尝试输入身高：175.5（正常）

**预期结果**：
- ✅ 对话框限制输入范围（80-230）
- ✅ 正常值可以输入
- ✅ 计算正常

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 5.1.2：极端体重值
**测试步骤**：
1. 尝试输入体重：10（过小）
2. 尝试输入体重：300（过大）
3. 尝试输入体重：70.5（正常）

**预期结果**：
- ✅ 对话框限制输入范围（30-200）
- ✅ 正常值可以输入
- ✅ 计算正常

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 5.2 空数据测试

#### 测试用例 5.2.1：无数据时的显示
**测试步骤**：
1. 清空所有身高记录
2. 清空所有体重记录
3. 检查各个页面显示

**预期结果**：
- ✅ 显示 "--" 而不是 "0"
- ✅ 页面不崩溃
- ✅ 可以正常添加新记录

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 六、云同步测试（如已登录）

### 6.1 步数同步测试

#### 测试用例 6.1.1：步数更新同步
**前置条件**：
- 已登录账号

**测试步骤**：
1. 更新步数数据
2. 观察同步行为
3. 检查日志

**预期结果**：
- ✅ 同步失败时不会导致应用崩溃
- ✅ 错误被正确捕获和记录
- ✅ 本地数据更新正常

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 七、性能测试

### 7.1 页面加载性能

#### 测试用例 7.1.1：页面加载速度
**测试步骤**：
1. 冷启动应用
2. 进入各个主要页面
3. 记录加载时间

**预期结果**：
- ✅ 页面加载流畅
- ✅ 无明显延迟（< 1秒）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

### 7.2 数据查询性能

#### 测试用例 7.2.1：大量数据时的性能
**前置条件**：
- 已有较多运动记录（如有）

**测试步骤**：
1. 进入热量页面
2. 切换周/月/年视图
3. 观察响应速度

**预期结果**：
- ✅ 视图切换流畅
- ✅ 无明显卡顿
- ✅ 数据正确显示

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 八、回归测试

### 8.1 已修复功能验证

#### 测试用例 8.1.1：身高记录功能回归
**测试步骤**：
1. 完整测试身高记录的增删改查
2. 验证数据同步

**预期结果**：
- ✅ 所有功能正常（之前被替换为 toast 的功能已恢复）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

#### 测试用例 8.1.2：体重同步回归
**测试步骤**：
1. 在体重趋势页面记录体重
2. 检查全局状态同步

**预期结果**：
- ✅ 体重正确同步到所有页面（之前缺少同步）

**实际结果**：___________
**状态**：□ 通过 □ 失败

---

## 测试总结

### 测试统计
- **总测试用例数**：___ 个
- **通过**：___ 个
- **失败**：___ 个
- **通过率**：___ %

### 发现的问题

| 编号 | 问题描述 | 严重程度 | 状态 |
|------|----------|----------|------|
| 1 | | | |
| 2 | | | |
| 3 | | | |

### 测试结论
□ 通过，可以发布
□ 有条件通过（需修复关键问题）
□ 不通过（存在严重问题）

---

## 测试说明

1. **测试环境**：请在相同的测试环境下执行所有测试用例
2. **数据准备**：建议先进行数据初始化，确保测试环境干净
3. **截图记录**：对于失败的用例，建议截图保存
4. **日志收集**：如有问题，请收集相关日志信息

---

## 优先级说明

- 🔴 **高优先级**：必须通过，影响核心功能
- 🟡 **中优先级**：重要功能，建议通过
- 🟢 **低优先级**：辅助功能，可选测试

---

**测试人员**：___________
**测试日期**：___________
**审核人员**：___________











